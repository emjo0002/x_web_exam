<h1>
    PROFILE
</h1>

{% set avatar = user.user_avatar_path %}
{% if avatar.startswith('http') %}
<img id="profile_avatar" class="profile-avatar-big" src="{{ avatar }}" alt="Avatar">
{% else %}
<img id="profile_avatar" class="profile-avatar-big" src="{{ url_for('static', filename='images/' ~ avatar) }}" alt="Avatar">
{% endif %}

<form class="x-dialog__form" action="{{ url_for('api_update_profile') }}" mix-post autocomplete="off"
    enctype="multipart/form-data">
    <div class="mt-2">
        <label for="avatar">
            <span>Upload avatar</span>
        </label>
        <input type="file" id="avatar" name="avatar" accept="image/*">
    </div>
    <div>
        <label for="user_email">
            <span>{{ x.lans('email') }}</span>
        </label>
        <input name="user_email" id="user_email" type="text" mix-check="{{ x.REGEX_EMAIL }}"
            value="{{ user.user_email }}">
    </div>
    <div>
        <label for="user_username">
            <span>{{ x.lans('username') }}</span> - {{ x.USER_USERNAME_MIN }} {{ x.lans('to') }} {{ x.USER_USERNAME_MAX
            }} {{ x.lans('characters') }}
        </label>
        <input name="user_username" id="user_username" type="text" mix-check="{{ x.REGEX_USER_USERNAME }}"
            value="{{ user.user_username }}">
    </div>
    <div>
        <label for="user_first_name">
            <span>{{ x.lans('first_name') }}</span> - {{ x.USER_FIRST_NAME_MIN }} {{ x.lans('to') }} {{
            x.USER_FIRST_NAME_MAX }} {{
            x.lans('characters') }}
        </label>
        <input name="user_first_name" id="user_first_name" type="text" mix-check="{{ x.REGEX_USER_USERNAME }}"
            value="{{ user.user_first_name }}">
    </div>
    <button class="x-dialog__btn" mix-default="{{ x.lans('update_profile') }}"
        mix-await="{{ x.lans('updating_profile') }}">
        {{ x.lans('updating_profile') }}
    </button>
</form>

<form action="{{ url_for('api_delete_account') }}" method="post"
    onsubmit="return confirm('Are you sure you want to delete your account? This action cannot be undone.');">
    <button type="submit" class="x-dialog__btn" style="background:#dc2626;color:white;margin-top:1rem;">
        Delete account
    </button>
</form>